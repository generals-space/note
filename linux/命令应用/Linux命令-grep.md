# Linux命令-grep

- `-r`: 递归查询子目录中的文件
- '-i': 忽略大小写

- `-n`: 输出匹配行所在行号
- `-l`: 不再输出匹配行的内容, 而是只显示包含匹配行的文件名(有完整的相对路径), 使用这个选项会使`-n`选项失效.
- `-v`: 反向选择, 不显示匹配字段的行.
- `-o`: 只输出行内匹配的部分而不是匹配目标表达式的整行, 用正则查询时十分合适.

> `grep`与正则表达式一样, 是对单行数据的查询, 无法进行跨行匹配.

------

- -A num: after, 显示目标匹配行的后num行
- -B num: before, 显示目标匹配行的前num行
- -C num: 显示目标匹配行的前num行与后num行

```shell
## 显示string及前5行
grep -B 5 string file
## 显示string及后5行
grep -A 5 string file
## 显示file文件里匹配string字串那行及其上下5行
grep -C 5 string file
```

## `-P`贪心匹配

`-P`选项赋予shell与perl功能类似的非贪心匹配的能力, 但貌似有许多发行版不支持.

非贪心匹配. 在选取html标签时, 得到最内层的标签.

```
## 将得到范围尽量大的div标签
$ grep -o  '<div>.*</div>'

## 将得到最内层的标签
$ grep -Po '<div>.*?</div>'
```

注意

1. `-P`选项和`.*`后(匹配次数后)的`?`都是必须的.
2. 如果非贪心标记`?`后的是一个数字, 这个匹配可能会失效.
