# Linux命令-sed(二)分组操作

在`sed`中一般分为 **分组替换**与 **分组打印**, 可以使用`\(`与`\)`作为一个分组, 并使用`\1`, `\2`...`\9`引用

示例有如下文件

test.txt

```
i am A.
$$date=20110101
i am not B.
```

目标是将`$$date=20110101`这一行的`20110101`取出并赋值给某一变量, 可以使用如下命令

```
$ cat test.txt | sed -n 's/$$date=\([0-9]*\)/\1/p'
20110101
```

------

关于替换, 分组引用的方式应该不能完成这个功能, 它只适用于单行数据. 假想将上述文件的同一行中`20110101`替换为`$d$ate`, 即引用`=`之前的字符串, 然后进行如下操作.

```
$ sed -i 's/\($$date\)=\([0-9]*\)/\1=\1/' test.txt
$ cat test.txt
i am A.
$$date=$$date
i am not B.
```

> 注意上述命令中`sed`不能带有`-n`选项, 否则目标文件会被清空, 具体原理是什么还暂时不清楚...
