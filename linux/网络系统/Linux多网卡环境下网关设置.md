# Linux多网卡环境下网关设置

参考文章

1. [关于linux的默认网关](http://rainbird.blog.51cto.com/211214/237082/)

linux装系统设IP, 这应该是系统管理员的基本功, 可是不同的网络结构有不同的ip设法, 您知道吗?

## 一块网卡的情况

这个没啥好说的, 估计地球人都知道:address, netmask, gateway然后netwok restart, 搞定.

## 两块网卡的情况

### 一个网关的情况
      
这种情况也简单, 一个网卡设一个ip, 其中一个网卡不设置gateway就ok了. 这样上网的时候走带网关的那边,  这台机器还能和不带网关的那个网络通讯.这种情况在利用linux当路由器或者代理网关的场景比较常见.

> 被设置的网关会被系统自动添加到路由规则中.

### 两个网关的情况

这种情况相对复杂, 复杂到两块网卡都不设置默认网关:) 这种情况发生在, 这台linux连接的两个网段都不是一个网段! 就是通过连接的两个网段还可以访问其它的不同的网段. 这种情况下, 无论把gateway设到哪边, 都会影响到另一个网段所连接的网段不能正常使用. 这就是我今天最想表述的问题. 在这种情况, 如果你想连接多个网段, 首先要在正确的网卡上设置正确的ip, 剩下的工作就交给route来做了.利用route命令把能上网或者想通过那边上网的网关设置成默认网关, 这样就解决了一个网段了.另一个段和它所连接的所有网段, 就要一条一个的加路由了.
