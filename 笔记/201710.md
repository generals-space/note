2017-10-07
------------------

参考文章

1. [哪些项目的源代码最值得阅读？](https://www.zhihu.com/question/19589485)

作者：江疆
链接：https://www.zhihu.com/question/19589485/answer/12305131
来源：知乎
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。

读代码可能有两种原因，一是对这个东西某处不满意想改，二是想学习其中的设计实现思路，前者动力更直接一些，后者则不好选，因为纯粹泛泛地看跟你实际环境关系不大的代码，其实不太容易学到东西。而且现代软件设计其实也充满了许多妥协和折衷，大家最常用的软件，往往不是代码最干净的，而是做了许多妥协折衷的。

比如最明显的有 Linux Kernel，有很多风格不一致的代码 (但这并不减弱它的学习价值)；mplayer 的代码是我见过的最丑陋但又非常实用的，在这样的代码基础上为啥能够活跃发展到今天，也很值得研究；vim 代码打满了各种 #ifdef，你看了也会很惊讶为啥一个人能维护如此错综复杂的代码这么多年。

我们有句老话，叫做水至清则无鱼，软件设计其实很多时候是在受限的条件下解决问题的本事。

从扩展思路的角度来说，一个程序员应该好好读过这样一些代码：

一个操作系统内核

一个编译器

一个解释器

一个数据库

一个 Web 服务器

一个 Web 浏览器

一个编辑器

因为这些都是几十年来被频繁地反复实现的代码，无数天才的程序员在这些领域发挥智慧，所以在它们各自领域“state of the art”的代码，可想而知质量是很高的。

2017-10-07
------------------

前端与后端MVC概念都是通用的, 不过由于前端直接面向用户, 所以多了事件机制, 需要处理用户触发的DOM状态改变.

关于数据, 前端从后端取得, 后端从数据库取得, 本质都是一样的.

前端MVC

V: 模板渲染, 事件监听.

M: 数据的增删改查操作都应写在M模块. 注意, 是单纯的增删改查操作, 不应有多余的校验, 返回处理等.

C: 模板渲染的数据构造, 事件监听时得到的状态, 原始数据的构造及校验.

注意: 路由是一部分的C, 传统MVC流程图中用户的交互是直接作用于View, 而路由系统的存在, 让用户直接与C交互也变成了可能(路由改变直接触发C中的方法).

三者应通过某种事件机制结合在一起.

后端

django本身就是一个根据MVC模式实现的框架.

M: 就不必说, 分离的很干脆, 并直接提供delete(), save()这种通用方法. 服务端的M是直接对接数据库的. 而前端的M, 是要看特定组件的.

V: 模板系统, 模板系统其实已经简单实现了全部V的功能(后端不需要事件监听)

C: 路由url是一部分的C, 还有数据校验-表单的序列化. 开发者编写的所有代码都是C层级的, 基本都是数据的再处理, 返回业务逻辑相关的数据. 

django的MVC感觉相对独立, 我想是因为它的实现已经相当完善的原因.

------

关于三层架构, 很多人都分不清它与MVC的差别, 我也是.

可以肯定的是, 三层架构的设定是针对后端的, 与前端完全没关系. 或者说, 三层架构的理念并不是在前后端分离开发的情况下提出的. 也就是说, 后端开发并不是单纯的api, 而是同时完成了数据渲染, 返回完成页面的模式. 三层架构是软件开发的指导思想, 并不单纯用于web开发.

很多人说MVC三个组件加起来就是三层架构中的表现层...这tm根本就不是一回事吧. django的MVC也实现了三层架构, 但是表现层是直接通过模板交给前端做的, 作为后端框架完全不涉及页面展现.

持久化层直接通过M实现了, ORM嘛, 而且没有与业务逻辑耦合.

我倒觉得, 严格遵守前端MVC + 后端MVC的一个完整工程, 可以说被限制得实现了三层架构. 这才是架构的含义, 广义, 通用, 指导思想级别. 而django, 作为框架, 约束, 限制, 解决方案着眼于实体实现的级别.

另外, MVC组件之间的单向/双向通信...md是信号/事件形式的叫通信, 还是直接传递数据叫通信???

扩展阅读

1. [【框架篇】mvc、mvp、mvvm使用关系总结](http://blog.csdn.net/hudan2714/article/details/50990359)

2. [MVVM没你想象的那么的好](http://ios.jobbole.com/83759/)