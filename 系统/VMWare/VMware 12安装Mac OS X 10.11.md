# VMware 12安装Mac OS X 10.11

[参考文章](http://jingyan.baidu.com/article/bea41d4388a8c4b4c51be6ab.html)

##工具/原料

1. VMware Workstation 12(11版无法安装10.11, 最高只有10.10选项)
2. unlocker 206/208(for OS X 插件补丁)
3. Mac OS X 10.11镜像(cdr格式)

> PS:
 
> 你需要有安装VMWare, 创建/配置虚拟机的经验.

##1. 安装VMWare12

##2. 安装VMWare补丁

默认VMWare无法创建Mac OS X的虚拟机, 因为没有这个选项, 需要为VMWare安装这个补丁才可以. 

###2.1 关闭服务

关闭启动的VMWare, 并且关闭VMWare的相关服务项. 打开任务管理器->服务, 找到所有VMWare相关的服务, 右键关闭.

> 注意:

> 如果无法服务关闭, 则先转到`进程`标签, 勾选`显示所有用户的进程`. 回到`服务`, 右键VMWare服务->转到进程, 会跳转到相应进程, 再右键关闭这个进程即可. 主要是`VMwareHostd`这个服务/进程.

###2.2 安装补丁

解压`unlocker206/208`(208试验可以, 206没试过), 运行该目录下的`win-install.cmd`, 右键以管理员身份运行, 等待运行完即可. 

> 注意:

> `unlocker`所在目录不能包含空格或中文字符, 否则安装失败而且没有失败的提示.

##3. 配置Mac OS X 10.11

1. 新建虚拟机
2. 典型安装
3. 安装程序光盘映像文件->浏览(默认过滤iso文件, 目标cdr不会出现. 将对话框右下角改为`所有文件(*.*)`, 此时输入框下会显示`无法检测此光盘映像中的操作系统, 您需要指定安装的操作系统`.).
4. 客户机操作系统选择`Apple OS X(M)`, 版本`OX X 10.11`.
5. 指定虚拟机名称与位置, 两者任意指定; 然后指定磁盘容量.
6. 完成之前会显示目标虚拟的配置, 建议选择`自定义硬件`为OS X系统分配合适的资源.

> 注意:
 
> 如果启动虚拟机时出现`VMware Workstation不可恢复错误:(vcpu-0)......`这样的错误. 可以找到目标Mac虚拟机的安装目录, 找到`.vmx`文件, 在 `smc.present = "TRUE"` 后添加`smc.version = "0"`, 保存, 再次启动即可.

##4. 安装Mac OS X 10.11

首先选择语言, 然后在继续之前需要先为系统创建磁盘分区, 否则硬盘处于未初始化的状态, 无法安装.

1. 安装界面顶部工具栏->实用工具->磁盘工具
2. 对话框右侧`外置`->VMware Virtual SA..->对话框顶部`抹除`按钮. 弹出的询问框中, 磁盘名称自定, 格式与方案保持默认即可(分别是`OS X 扩展(日志式)`与`GUID分区图`), 点击`抹掉`. 然后退出磁盘工具.
3. 继续执行安装步骤, 可以选择安装磁盘. 确定即可.

##5. 额外安装

可以安装VMWare Tools, 创建共享文件夹等.

VMWare Tools可以全屏, 可以鼠标移出.

OS升级更新到新版本可能不能启动, 这时要在网上寻找更新的unlocker, 只需要重新安装unlocker即可启动.

### 5.1 共享磁盘

在VMWare中启用共享文件夹后还需要在OS X内部发现此文件夹. 步骤为Finder->偏好设置->勾选已连接的服务器, 然后在桌面上会立刻出现VMWare指定的共享文件夹.

------

安装好的虚拟机系统在其他电脑上打开时要求: 

- VMware版本12.0+

- VMware必须安装有unlocker补丁
