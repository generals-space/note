# 悲观锁与乐观锁

参考文章

1. [Kubernetes 请求并发控制与数据一致性（含ResourceVersion、Update、Patch简析）](https://blog.csdn.net/jackxuf/article/details/80084358)

悲观锁(PCC): 类似于传统读写锁中的写锁, 写操作前加锁, 另外的线程写操作前必须竞争锁, 成员后才可以操作, 否则就排队等待.

乐观锁(OCC): 各事务在操作前无需事先获得锁, 可以直接修改, 只在最后提交的时候比较.

相对于悲观锁对锁的提前控制, 乐观锁相信请求之间出现冲突的概率是比较小的, 在读取及更改的过程中都是不加锁的, 只有在最后提交更新时才会检测冲突, 因此在高并发量的系统中占有绝对优势.

乐观锁通常通过增加一个资源版本字段, 来判断请求是否冲突. kuber中通过`resourceVersion`字段实现.

