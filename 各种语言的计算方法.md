# 各种语言的数学函数使用方法

使用各种语言进行计算, 尤其是`shell`, `javascript`或`python`这种交互式输入的方式, 可以用来当作计算器来用, 十分方便. 这里来个总结, 包括数制转换, 常用数学函数等.

## 1. javascript

### 1.1 parseInt/parseFloat


#### 1.1.1 从字符串提取整数/浮点数

```js
//字符串转换为数字
parseInt('12')
12
parseFloat('3.245')
3.245

//可以无视空格和其他字符干扰, 但只能匹配到第1个合法的整数/浮点数
parseInt(' 34 e')
34
parseInt('34 4')
34

//另外, 如果是其他字符的话, 只有在合法数值的后面出现才可以, 如果出现在数值前面, 会返回NaN
parseFloat('12.34abc')
12.34
parseFloat('a 12.34')
NaN
```

------

#### 1.1.2 使用parseInt()进行数制转换

parseInt()的输入参数可以是任意进制, 返回值是十进制, 即可以将任意进制的数字转换为十进制.

```js
parseInt('11000000', 2)
192
parseInt('FF', 16)
255
//纯数字的话, 参数格式可以直接是数字, 但超过十进制需要有符号代替时, 需要加上引号才行, 否则会报错
parseInt(11000000, 2)
192
parseInt(ff, 16)
Uncaught ReferenceError: ff is not defined
```

#### 1.1.3 parseFloat()进行科学计数法格式转换

parseFloat()输入是科学计数法的格式, 返回值为正常格式. (这个功能貌似有点鸡肋, 程序中几乎没见过, 而实际使用时自己也能数0的个数嘛).

```js
parseFloat('314e-2')
3.14
parseFloat('0.0314E+2')
3.14
//...貌似经过parseFloat计算后的结果不能超过float的表示极限
parseFloat("10E+19")
100000000000000000000
parseFloat("10E+20")
1e+21
parseFloat("100E+18")
100000000000000000000
parseFloat("100E+19")
1e+21
```

## 2. Linux下的计算方法

原文链接

[Linux下的计算器(bc、expr、dc、echo、awk)知多少？](http://blog.chinaunix.net/uid-24673811-id-1760837.html)

### 2.1 bc

bc在默认的情况下是个交互式的命令, 不过可以通过管道直接返回计算结果。在bc工作环境下，可以使用以下计算符号：

- \+ 加法

- \- 减法 

- \* 乘法 

- / 除法 

- ^ 指数 

- % 余数

- 数学函数: 开方(sqrt), 正弦(s), 余弦(c)...

注意: **`bc`命令的操作数与操作符之间不能有空格, 不然会出错**

#### 2.1.1 交互示例

```
$ bc
bc 1.06
Copyright 1991-1994, 1997, 1998, 2000 Free Software Foundation, Inc.
This is free software with ABSOLUTELY NO WARRANTY.
For details type `warranty'. 

(9+8)/2
8
## 多个表达式
1+2; 7^2; 9-7*2
3
49
-5
```

```shell
## `scale`设置小数位
scale=3         
(9+8)/2
(9+8)/3
5.666
```

```shell
## `ibase`指定输入数据的进制
## `obase`指定输出数据的进制
## 数据数据看作是16进制
ibase=16
16+12
40
## 将输入数据依然以十进制对待
ibase=10
obase=2
2*5
1010

## 数学函数, 可用的比较少. 使用数学函数时默认自动将精度设置为20
## 计算π值
4*a(1)
3.14159265358979323844
## 开平方
sqrt(100)
10.00000000000000000000
```

#### 2.1.2 命令行示例

```
$ echo '12+23' | bc
35
$ echo '12+23; 6^3;' | bc
35
216

## 精确位数(只对当前行有效)
echo 'scale=3; (87+2)/9' | bc
9.888'

## 进制转换
$ ''
```

#### 2.1.3 读取文件

```
$ cat calc.txt 
3+2
4+5
8*2
10/4

$ bc calc.txt 
5
9
16
2
```

### 2.2 expr命令

`expr`可以对表达式进行计算, 其基本格式为

`expr 表达式1 操作符 表达式2 操作符...`

相应的语法规则有:

1. 表达式与操作符用空格隔开, 所以表达式不可以包含空格

2. shell的特定字符需要使用反斜线转义

3. 数值计算有优先级但不能出现括号

4. 包含空格和其他特殊字符的项要用引号包裹起来(好像不对啊)

------

表达式包括

- 条件判断

- 数值比较

- 数值计算: 加减乘除, 求余

- 字符串比较, 索引, 截取, 长度计算

**其中数值运算要求数字必须为整数**

**示例**

```
## 必须要有空格
$ expr 1 + 2 + 3
6
## 否则...
$ expr 1+2+3
1+2+3
## 试试这个
$ x='1 + 2 + 3'
$ expr $x
6
## 特殊字符需要转义
$ expr 3 \* 9
27
## 计算优先级
$ expr 3 + 2 \* 2
7
## 不能用括号
$ expr ( 3 + 2 ) \* 2
-bash: syntax error near unexpected token `3'
```

#### 2.2.1 条件判断

1. `expr 表达式1 \| 表达式2` 如果表达式1不为0或空则返回`表达式1`, 否则返回`表达式2`.

2. `expr 表达式1 \& 表达式2` 如果两个表达式都不为0或空则返回`表达式1`, 否则返回数值0

```
$ x='0'
$ y='结果呢'
$ expr $x \| $y
结果呢

$ x=0
$ expr $x \| $y
结果呢

x='abc'
$ expr $x \| $y
abc
$ x='a bc'
$ expr $x \| $y
expr: syntax error
```

```
$ x=123
$ y=abc
$ expr $x \& $y
123
$ y=0
$ expr $x \& $y
0
$ x=0
$ y=abc
$ expr $x \& $y
0
```

#### 2.2.2 数值比较

`表达式1 { =, \>, \>=, \<, \<=, != } 表达式2`

如果两个表达式都是整数，返回整数比较的结果(0或1)；否则它返回的是字符串比较的结果。

```
$ x=2
$ y=3
$ expr $x \< $y
1
$ expr $x = $y
0
```

字符串比较就算了.

#### 2.2.3 数值计算

包括`+`, `-`, `\*`, `/`, `%`, 分别为加减乘除, 求余.

运算符仍然有优先级, 但不能使用括号.

#### 2.2.4 字符串操作

不在这里介绍

### 2.3 (())与[]操作符