# Redis键值设计

参考文章

1. [Redis键值设计](https://blog.csdn.net/iloveyin/article/details/7105181)

参考文章1中所列示例十分易于理解. 关于登录表的设计, 传统关系型数据库结构如下.

```
mysql> select * from login;
+---------+----------------+-------------+---------------------+
| user_id | name           | login_times | last_login_time     |
+---------+----------------+-------------+---------------------+
|       1 | ken thompson   |           5 | 2011-01-01 00:00:00 |
|       2 | dennis ritchie |           1 | 2011-02-01 00:00:00 |
|       3 | Joe Armstrong  |           2 | 2011-03-01 00:00:00 |
+---------+----------------+-------------+---------------------+
```

user_id表的主键，name表示用户名，login_times表示该用户的登录次数，每次用户登录后，login_times会自增，而last_login_time更新为当前时间。

关系型数据转化为KV数据库，方法如下：

键名为`表名:主键值:列名`

键值为列值.

`user_id`为主键, 存在`user_id`对`name`的映射, 但是用户本人不知道自己的id, 只知道用户名, 所以还需要存在`name`对`user_id`的映射.

关于这个示例, 可以看出关系型数据库sql语句功能强大, 可以完成多种操作, 而redis的查询方法只有对键名的过滤, 没有从值反查的方法. 所以反向映射在一定程度上是必要的.

参考文章1同时也介绍了列表与集合的使用方法与场景.