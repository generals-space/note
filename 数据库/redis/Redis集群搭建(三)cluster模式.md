# redis集群搭建

redis3.0之前没有集群化的解决方案, 至多只有哨兵的存在. 3.0之后redis原生带有cluster的支持. 现在部署redis集群大多推荐使用cluster模式.

redis官网对[cluster模式](http://redis.io/topics/cluster-tutorial)做了基础但详细的介绍, 可以参考. 下面是一点自己的理解.

cluster 集群至少包含3个节点. 如果只有三个节点的话, 它们都应该作为主节点. 可以在之后为主节点添加从节点, 也可以继续添加新的主节点, 以提高可用性与负载均衡. 从节点不会直接对外服务, 而是实现对其本身的主节点的数据同步. 当主节点挂掉, 从节点可以接替主节点的位置.

cluster集群作为一个整体对外服务, 集群将所有请求分成16384份(对应文档中`slot`的概念, 实际上比这个解释要复杂的多, 可以搜索`一致性哈希`深入研究), 每个主节点可以指定其所划分的slot个数及序号. 最初创建3主节点集群或是按照官网及大部分个人博客上的3主3从的教程来说, 三个主节点平分这16384份请求.

cluster的建立流程, 先讲述3主节点的情况.

<待续...>
